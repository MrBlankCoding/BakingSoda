<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sodium Bicarbonate (NaHCO₃) 3D Model - Scientific Visualization</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            background: #1a1a1a;
            margin: 0;
            font-family: 'Arial', sans-serif;
        }
        canvas {
            display: block;
        }
        .card {
            background-color: rgba(0, 0, 0, 0.75);
            border-radius: 8px;
            padding: 1rem;
            max-width: 300px;
            box-shadow: 0px 4px 12px rgba(0, 0, 0, 0.5);
        }
        .card:hover {
            box-shadow: 0px 6px 20px rgba(0, 0, 0, 0.8);
        }
        h1 {
            font-size: 2.5rem;
            margin: 0;
            color: #fff;
        }
        p {
            font-size: 1rem;
            margin-top: 0.5rem;
            color: #bbb;
        }
        .text-gray-900 {
            color: #f5f5f5;
        }
        .text-gray-400 {
            color: #ccc;
        }
        .legend li {
            margin-bottom: 0.5rem;
        }
        .legend span {
            font-weight: bold;
        }
    </style>
</head>
<body class="bg-gray-900">

    <div id="info" class="absolute top-10 left-1/2 transform -translate-x-1/2 text-center text-white text-2xl font-semibold shadow-md">
        <h1>Sodium Bicarbonate (NaHCO₃)</h1>
        <p>Baking Soda - Molecular Structure with Accurate Bond Lengths and Angles</p>
    </div>

    <div id="controls" class="absolute bottom-10 left-10 bg-black bg-opacity-70 text-white p-4 rounded-lg max-w-xs shadow-lg">
        <strong>Controls:</strong><br>
        • Drag to rotate<br>
        • Scroll to zoom<br>
        • Double-click to reset view
    </div>

    <div id="legend" class="absolute top-24 right-10 card text-white">
        <strong>Atomic Structure:</strong><br>
        <ul class="legend text-gray-400">
            <li><span>Na⁺ (Purple):</span> Sodium ion [1.02Å radius]</li>
            <li><span>H (White):</span> Hydrogen [0.25Å radius]</li>
            <li><span>C (Grey):</span> Carbon [0.70Å radius]</li>
            <li><span>O (Red):</span> Oxygen [0.60Å radius]</li>
        </ul>
        <br>
        <strong>Bond Lengths:</strong><br>
        <ul class="legend text-gray-400">
            <li><span>C-O (double):</span> 1.23Å</li>
            <li><span>C-O (single):</span> 1.35Å</li>
            <li><span>O-H:</span> 0.96Å</li>
        </ul>
        <br>
        <strong>Bond Angles:</strong><br>
        <ul class="legend text-gray-400">
            <li><span>O-C-O:</span> 120°</li>
            <li><span>C-O-H:</span> 108.5°</li>
        </ul>
    </div>

    <div id="properties" class="absolute bottom-10 right-10 card text-white">
        <strong>Chemical Properties:</strong><br>
        <ul class="legend text-gray-400">
            <li><span>Molar mass:</span> 84.007 g/mol</li>
            <li><span>Density:</span> 2.20 g/cm³</li>
            <li><span>pH (solution):</span> ~8.3</li>
            <li><span>Melting point:</span> Decomposes at 50°C</li>
        </ul>
        <br>
        <strong>Applications:</strong><br>
        <ul class="legend text-gray-400">
            <li>Baking (leavening agent)</li>
            <li>Antacid (neutralizes stomach acid)</li>
            <li>Fire extinguisher agent</li>
            <li>Cleaning agent</li>
        </ul>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script>
        const scene = new THREE.Scene();
        scene.background = new THREE.Color(0x1a1a1a);
        const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
        const renderer = new THREE.WebGLRenderer({ antialias: true });
        renderer.setSize(window.innerWidth, window.innerHeight);
        document.body.appendChild(renderer.domElement);

        // Enhanced lighting for better visibility
        const ambientLight = new THREE.AmbientLight(0xffffff, 0.7);
        scene.add(ambientLight);
        const pointLight1 = new THREE.PointLight(0xffffff, 0.8);
        pointLight1.position.set(10, 10, 10);
        scene.add(pointLight1);
        const pointLight2 = new THREE.PointLight(0xffffff, 0.5);
        pointLight2.position.set(-10, -10, -10);
        scene.add(pointLight2);

        function createAtom(color, radius, metallic = false) {
            const geometry = new THREE.SphereGeometry(radius, 32, 32);
            const material = new THREE.MeshPhongMaterial({ 
                color: color,
                shininess: metallic ? 100 : 30,
                specular: metallic ? 0x666666 : 0x444444
            });
            return new THREE.Mesh(geometry, material);
        }

        function createBond(start, end, isDouble = false) {
            const direction = new THREE.Vector3().subVectors(end, start);
            const length = direction.length();
            const bondGroup = new THREE.Group();

            if (isDouble) {
                const offset = 0.12;
                const perpendicular = new THREE.Vector3(direction.y, -direction.x, 0).normalize().multiplyScalar(offset);
                
                const geometry1 = new THREE.CylinderGeometry(0.04, 0.04, length, 12);
                const geometry2 = new THREE.CylinderGeometry(0.04, 0.04, length, 12);
                const material = new THREE.MeshPhongMaterial({ color: 0xcccccc });
                
                const bond1 = new THREE.Mesh(geometry1, material);
                const bond2 = new THREE.Mesh(geometry2, material);
                
                bond1.position.copy(start).add(perpendicular);
                bond2.position.copy(start).sub(perpendicular);
                
                bond1.position.lerp(end.clone().add(perpendicular), 0.5);
                bond2.position.lerp(end.clone().sub(perpendicular), 0.5);
                
                bond1.quaternion.setFromUnitVectors(new THREE.Vector3(0, 1, 0), direction.normalize());
                bond2.quaternion.setFromUnitVectors(new THREE.Vector3(0, 1, 0), direction.normalize());
                
                bondGroup.add(bond1);
                bondGroup.add(bond2);
            } else {
                const geometry = new THREE.CylinderGeometry(0.06, 0.06, length, 12);
                const material = new THREE.MeshPhongMaterial({ color: 0xcccccc });
                const bond = new THREE.Mesh(geometry, material);
                bond.position.copy(start).lerp(end, 0.5);
                bond.quaternion.setFromUnitVectors(new THREE.Vector3(0, 1, 0), direction.normalize());
                bondGroup.add(bond);
            }
            
            return bondGroup;
        }

        const molecule = new THREE.Group();

        // Create atoms with accurate relative sizes and positions
        const sodium = createAtom(0x9933FF, 1.02, true); // Sodium ion with actual ionic radius
        sodium.position.set(2.5, 0, 0);

        const carbon = createAtom(0x808080, 0.70); // Carbon with actual atomic radius
        carbon.position.set(0, 0, 0);

        const oxygen1 = createAtom(0xFF0000, 0.60); // Double-bonded oxygen
        oxygen1.position.set(0, 1.23, 0); // Using actual C=O bond length

        const oxygen2 = createAtom(0xFF0000, 0.60);
        oxygen2.position.set(-1.17, -0.675, 0); // Positioned at 120° with C-O single bond length

        const oxygen3 = createAtom(0xFF0000, 0.60);
        oxygen3.position.set(1.17, -0.675, 0); // Positioned at 120°

        const hydrogen = createAtom(0xFFFFFF, 0.25); // Hydrogen with actual atomic radius
        hydrogen.position.set(-1.8, -1.1, 0); // Positioned with actual O-H bond length and angle

        // Add atoms to molecule
        molecule.add(sodium);
        molecule.add(carbon);
        molecule.add(oxygen1);
        molecule.add(oxygen2);
        molecule.add(oxygen3);
        molecule.add(hydrogen);

        // Add bonds with accurate lengths
        molecule.add(createBond(carbon.position, oxygen1.position, true));
        molecule.add(createBond(carbon.position, oxygen2.position));
        molecule.add(createBond(carbon.position, oxygen3.position));
        molecule.add(createBond(oxygen2.position, hydrogen.position));

        scene.add(molecule);

        camera.position.z = 8;

        // Interactive controls
        let mouseDown = false;
        let mouseX = 0;
        let mouseY = 0;

        document.addEventListener('mousedown', (e) => {
            mouseDown = true;
            mouseX = e.clientX;
            mouseY = e.clientY;
        });

        document.addEventListener('mouseup', () => {
            mouseDown = false;
        });

        document.addEventListener('mousemove', (e) => {
            if (mouseDown) {
                const deltaX = e.clientX - mouseX;
                const deltaY = e.clientY - mouseY;
                
                molecule.rotation.y += deltaX * 0.01;
                molecule.rotation.x += deltaY * 0.01;
                
                mouseX = e.clientX;
                mouseY = e.clientY;
            }
        });

        document.addEventListener('dblclick', () => {
            molecule.rotation.set(0, 0, 0);
            camera.position.z = 8;
        });

        document.addEventListener('wheel', (e) => {
            camera.position.z += e.deltaY * 0.01;
            camera.position.z = Math.max(4, Math.min(camera.position.z, 20));
        });

        window.addEventListener('resize', () => {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
        });

        function animate() {
            requestAnimationFrame(animate);
            
            if (!mouseDown) {
                molecule.rotation.y += 0.002;
            }
            
            renderer.render(scene, camera);
        }

        animate();
    </script>
</body>
</html>